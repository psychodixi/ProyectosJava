import javax.swing.JOptionPane;

public class Menu {
    public static void main(String[] args) {
        
        //PRODUCTOS EXISTENTES
        Producto arrayProductos[] = new Producto[100];
        arrayProductos[0] = new Producto("Monitor", 99990.0, 50);
        arrayProductos[1] = new Producto("Audifonos", 19990.0, 50);
        arrayProductos[2] = new Producto("Notebook", 449990.0, 50);
        arrayProductos[3] = new Producto("Gabinete", 54990.0, 50);
        arrayProductos[4] = new Producto("Mouse", 18990.0, 50);
        
        
        //ARRAY DONDE SE GUARDARDARÁN LAS COMPRAS REALIZADAS
        Compra arrayCompras[] = new Compra[1000];
        
        //CREACIÓN DE MENU
        int op;
        int opc;
        do {
            op = Integer.parseInt(JOptionPane.showInputDialog("MENU DE OPCIONES\n"+
                    "\n1. Ingresar una Compra"+
                    "\n2. Ingresar un producto nuevo a bodega"+
                    "\n3. Consultar stock de un producto"+
                    "\n4. Mostrar productos sin stock"+
                    "\n5. Buscar Compra por cliente"+
                    "\n6. Mostrar total recaudado por Compras con TARJETA"+
                    "\n7. Mostrar total recaudado por Compras con EFECTIVO"+
                    "\n8. Mostrar total recaudado"+
                    "\n9. SALIR\n"+
                    "\n INGRESE UNA OPCIÓN "));
            
            switch (op) {
                case 1:
                    String listaP = "";  
                    int largoP = 0;
                    int largoC = 0;
                    int opc = 0;
                    int opc2 = 0;
                    int cantidad = 0;
                    double totPago = 0;
                    String metPago = "";
                    String rut = "";
                    boolean conExit = false;
                    

                    
                    //busca final de producto
                    for (int i = 0; arrayProductos[i] != null ; i++) {
                        largoP++;
                        listaP += "\n" + (i + 1) + ". " + arrayProductos[i].getNombre();
                    }
                    
                    //final de compras
                    for (int i = 0; arrayCompras[i] != null; i++) {
                        largoC++;
                    }

                    //solo ingresa si no es nulo
                    do {
                        rut = JOptionPane.showInputDialog(null,"Ingrese rut");
                    } while (rut.equals(""));
                    
                    //crear arreglo con todos los stocks
                    int compraReciente[] = new int[largoP];
                    
                    //llenar de stocks
                    for (int i = 0; i < largoP; i++) {
                        compraReciente[i] = arrayProductos[i].getStock();
                    }
                    
                    //crear lista
                    do {
                        opc = Integer.parseInt(JOptionPane.showInputDialog(null, "Seleccione producto a comprar\n"+ listaP + "\n" + (largoP + 1) + ". Salir\n" + (largoP + 2) + ". Pagar"  ));
                        
                        if (opc > 0 && opc <= largoP) {
                            
                            cantidad = Integer.parseInt(JOptionPane.showInputDialog(null, "Stock Disponible: "+compraReciente[opc-1]));
                            
                            if (cantidad <= compraReciente[opc-1]) {
                                totPago += compraReciente[opc-1];
                               compraReciente[opc-1] -= cantidad;
                                
                            }else{  
                            JOptionPane.showMessageDialog(null, "Cantidad no disponible");
                            }
                            
                        }else if(opc != largoP + 1 && opc != largoP + 2){
                        JOptionPane.showMessageDialog(null, "Opcion no valida");
                        }
                        
                        if (opc == largoP + 2) {
                            opc2 = Integer.parseInt(JOptionPane.showInputDialog(null,"Total a pagar: "+totPago +"\n"
                                + "Seleccione metodo pago\n"
                                + "1. Tarjeta\n"
                                + "2. Efectivo\n"
                            ));
                             

                            switch (opc2) {
                                case 1:
                                    metPago = "Tarjeta";
                                    for (int i = 0; i < largoP; i++) {
                                        arrayProductos[i].setStock(compraReciente[i]);
                                    }
                                    conExit = true;
                                    break;
                                case 2:
                                    metPago = "Efectivo";
                                    for (int i = 0; i < largoP; i++) {
                                        arrayProductos[i].setStock(compraReciente[i]);
                                    }
                                    conExit = true;
                                    break;
                                default:
                                    JOptionPane.showMessageDialog(null, "Opcion no valida");
                            }
                                    
                        }
 
                        //boton salir o compra exitosa
                    }while(opc != largoP + 1 && conExit == false);
                    
                   
                    
                    if (metPago != "") {
                        arrayCompras[largoC] = new Compra(rut,totPago,metPago);

                    }
                    
                    break;
                    
                case 2:
                    //INGRESE CÓDIGO CORRESPONDIENTE A LA OPCIÓN 2
                    int f = 0;
                    String n = JOptionPane.showInputDialog(null, "INGRESE UN NUEVO Nombre");
                    double p = Double.parseDouble(JOptionPane.showInputDialog(null, "INGRESE UN NUEVO Precio"));
                    int s = Integer.parseInt(JOptionPane.showInputDialog(null, "INGRESE UN NUEVO Stock"));

                    for (int i = 0;  arrayProductos[i] != null; i++) {
                        f++;
                    }
                    
                    arrayProductos[f] = new Producto(n,p,s);
                    
                    
                    break;
                    
                case 3:

                    int conStock = Integer.parseInt(JOptionPane.showInputDialog(null, "CONSULTAR STOCK DE UN PRODUCTO \n"
                            + "1. MONITORES \n"
                            + "2. GABINETES \n"
                            + "3. MEMORIAS RAM \n"));
                    switch (conStock) {
                        case 1:
                            if (arrayProductos[0].getStock()== 0) {
                                JOptionPane.showMessageDialog(null, "NO HAY SUFICIENTE STOCK");
                            } else {

                                JOptionPane.showMessageDialog(null, "STOCK DE MONITORES: " + arrayProductos[0].getStock()); 

                            }
                    break;
                    
                case 4:

                    String largoP2 = "";
                    int largoxd = 0;
                    for (int i = 0; arrayProductos[i] != null; i++) {
                        largoxd++;
                        
                        if (arrayProductos[i].getStock() == 0) {

                                largoP2 += "\n" + (i+1) + "." + arrayProductos[i].getNombre();
                        }
                        
                    }
                    
                    JOptionPane.showMessageDialog(null, "PRODUCTOS SIN STOCK\n" + largoP2 );
                    break;
                    
                case 5:
                    //buscar compra por rut del cliente
                    String buscar2 = JOptionPane.showInputDialog(null, "CONSULTAR BOLETA POR RUT: " + "\n"
                            + "INGRESE EL RUT DEL CLIENTE");
                    for (int i = 0; arrayCompras[i] != null; i++) {

                        if (buscar2.equals(arrayCompras[i].getCliente())) {
                            arrayCompras[i].mostrarCompra();
                            i = 3;

                        } else if (i==2){
                            JOptionPane.showMessageDialog(null, "EL NOMBRE INGRESADO NO EXISTE");
                        } 
                    }
                    break;
                    
                case 6:
                    //INGRESE CÓDIGO CORRESPONDIENTE A LA OPCIÓN 6
                    break;
                    
                case 7:
                    //INGRESE CÓDIGO CORRESPONDIENTE A LA OPCIÓN 7
                    break;
                    
                case 8:
                    //"\n8. Mostrar total recaudado"+
                    
                    double totalMontoTotal = 0;
                    for (int i = 0; arrayCompras[i] != null; i++) {
                        totalMontoTotal += arrayCompras[i].montoTotal();
                    break;
                    
                case 9:
                    //INGRESE CÓDIGO CORRESPONDIENTE A LA OPCIÓN 9
                    System.exit(0);
                    break;    
                    
                default:
                    JOptionPane.showMessageDialog(null, "OPCIÓN NO VÁLIDA");  
            }
        }while (op!=9);  
    }
}
